import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
from matplotlib import rc

# í•œêµ­ì–´ í°íŠ¸ ì„¤ì •
rc('font', family='Malgun Gothic')
plt.rcParams['axes.unicode_minus'] = False  # í•œê¸€ í°íŠ¸ ì‚¬ìš© ì‹œ ë§ˆì´ë„ˆìŠ¤ ê¸°í˜¸ ê¹¨ì§ ë°©ì§€

st.set_page_config(
    page_title = "AI for Ecosystem",
    page_icon = "ğŸŒ"
    )

# ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
df1 = pd.read_csv("./datas/temp_seoul.csv")
df2 = pd.read_csv("./datas/CO2.csv")

st.title("[1ì°¨ì‹œ]ğŸŒì§€êµ¬ì˜¨ë‚œí™”ğŸ”¥")

# 1. ì„œìš¸ ì§€ì—­ì˜ í‰ê·  ê¸°ì˜¨ ë³€í™”
st.header("1. ì„œìš¸ ì§€ì—­ì˜ í‰ê·  ê¸°ì˜¨ ë³€í™”ğŸŒ¡ï¸")
st.subheader("1.1. ë°ì´í„° ì‚´í´ë³´ê¸°")
st.link_button("ğŸ“’ì¶œì²˜: ê¸°ìƒìë£Œê°œë°©í¬í„¸", "data.kma.go.kr")
st.write(df1)

st.subheader("1.2. ë°ì´í„° ì‹œê°í™”")

# ì‹œê°í™” ë°ì´í„° ì„ íƒ
temp_column = st.radio(
    "ì–´ë–¤ ë°ì´í„°ë¥¼ ì‹œê°í™”í• ê¹Œìš”?",
    ("í‰ê· ê¸°ì˜¨(â„ƒ)", "í‰ê· ìµœì €ê¸°ì˜¨(â„ƒ)", "í‰ê· ìµœê³ ê¸°ì˜¨(â„ƒ)")
)

# ê·¸ë˜í”„ ìœ í˜• ì„ íƒ
chart_type = st.selectbox(
    "ì–´ë–¤ ê·¸ë˜í”„ë¡œ ë‚˜íƒ€ë‚¼ê¹Œìš”?",
    ("ê·¸ë˜í”„ ì„ íƒí•˜ê¸°", "ë§‰ëŒ€ê·¸ë˜í”„", "êº¾ì€ì„ ê·¸ë˜í”„"),
    key="temp_chart"
)

# ì‹œê°í™”
if chart_type == "êº¾ì€ì„ ê·¸ë˜í”„":
    st.line_chart(data=df1, x="ì—°ë„", y=temp_column, color=["#FF0000"], height=500, use_container_width=True)
elif chart_type == "ë§‰ëŒ€ê·¸ë˜í”„":
    st.bar_chart(data=df1, x="ì—°ë„", y=temp_column, color=["#FF0000"], height=500, use_container_width=True)
else:
    st.write("ê·¸ë˜í”„ ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.")

st.write("â“ì„œìš¸ì˜ í‰ê·  ê¸°ì˜¨ì€ ì–´ë–»ê²Œ ë³€í•˜ê³  ìˆë‚˜ìš”?")

if st.button("ğŸ”ì§€êµ¬ì˜ í‰ê·  ê¸°ì˜¨ì€ ì–´ë–»ê²Œ ë³€í•˜ê³  ìˆì„ê¹Œ?"):
    st.write("ë¹™í•˜ê¸°ì™€ ê°„ë¹™ê¸°ê°€ ë°˜ë³µë˜ë©´ì„œ ì§€êµ¬ ê¸°ì˜¨ì€ ë³€í•˜ê³  ìˆìŠµë‹ˆë‹¤.")
    st.write("ë‹¤ë§Œ, ìµœê·¼ 100ì—¬ ë…„ê°„ ì§€êµ¬ ê¸°ì˜¨ì˜ ì¦ê°€ í­ì€ ì´ì „ì— ë³¼ ìˆ˜ ì—†ì—‡ë˜ ë†’ì€ ìˆ˜ì¹˜ì´ë©°, ì¦ê°€ ì†ë„ê°€ ë§¤ìš° ë¹¨ë¼ì§€ê³  ìˆìŠµë‹ˆë‹¤.")
    st.image("images/ì§€êµ¬ê¸°ì˜¨.png", caption="[ê³¼ê±° ì˜¨ë„ ë³€í™”ì™€ ìµœê·¼ ì§€êµ¬ í‘œë©´ ì—°í‰ê·  ì˜¨ë„ ë³€í™”]")
st.divider()

# 2. ëŒ€ê¸° ì¤‘ CO2 ë†ë„ ë³€í™”
st.header("2. ëŒ€ê¸° ì¤‘ CO2 ë†ë„ ë³€í™”ğŸ­")
st.subheader("2.1. ë°ì´í„° ì‚´í´ë³´ê¸°")
st.link_button("ğŸ“’ì¶œì²˜: í•˜ì™€ì´ ë§ˆìš°ë‚˜ë¡œì•„ ê´€ì¸¡ì†Œì—ì„œ ì¸¡ì •í•œ ì´ì‚°í™”íƒ„ì†Œ(CO2) ë†ë„", "datahub.io/core/co2-ppm")
st.write(df2)

st.subheader("2.2. ë°ì´í„° ì‹œê°í™”")

# ê·¸ë˜í”„ ìœ í˜• ì„ íƒ
chart_type2 = st.selectbox(
    "CO2 ë°ì´í„°ë¥¼ ì–´ë–¤ ê·¸ë˜í”„ë¡œ ë‚˜íƒ€ë‚¼ê¹Œìš”?",
    ("ê·¸ë˜í”„ ì„ íƒí•˜ê¸°", "ë§‰ëŒ€ê·¸ë˜í”„", "êº¾ì€ì„ ê·¸ë˜í”„"),
    key="co2_chart"
)

# ì‹œê°í™”
if chart_type2 == "êº¾ì€ì„ ê·¸ë˜í”„":
    st.line_chart(data=df2, x="ì—°ë„", y="CO2(ppm)", height=500, use_container_width=True)
elif chart_type2 == "ë§‰ëŒ€ê·¸ë˜í”„":
    st.bar_chart(data=df2, x="ì—°ë„", y="CO2(ppm)", height=500, use_container_width=True)
else:
    st.write("ê·¸ë˜í”„ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.")

st.write("â“ëŒ€ê¸° ì¤‘ CO2 ë†ë„ëŠ” ì–´ë–»ê²Œ ë³€í•˜ê³  ìˆë‚˜ìš”? ")
if st.button("ğŸ”ëŒ€ê¸° ì¤‘ CO2 ë†ë„ ë³€í™”ëŠ” ê¸°ì˜¨ ì¦ê°€ íŒ¨í„´ê³¼ ì–´ë–¤ ê´€ë ¨ì´ ìˆë‚˜ìš”?"):
    st.write("ìœ„ì—ì„œ ì‚´í´ë³¸ ê¸°ì˜¨ì˜ ì¦ê°€ íŒ¨í„´ê³¼ ëŒ€ê¸° ì¤‘ CO2 ë†ë„ì˜ ë³€í™”ëŠ” ë§¤ìš° í¡ì‚¬í•©ë‹ˆë‹¤. ")
    st.write("CO2 ë†ë„ ë³€í™” ê³¡ì„ ì€ ì´ ê´€ì¸¡ì„ ì£¼ë„í•œ ê¸°í›„í•™ìì˜ ì´ë¦„ì„ ë”°ì„œ í‚¬ë§ ê³¡ì„ ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.")
    st.write("1958ë…„ ì´í›„ CO2 ë†ë„ëŠ” ê¾¸ì¤€íˆ ì¦ê°€í•˜ê³  ìˆìœ¼ë©° ì´ í‚¬ë§ ê³¡ì„ ì˜ ìƒìŠ¹ì€ ê³§ ì§€êµ¬ ê¸°ì˜¨ ìƒìŠ¹ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.")
    st.image("images/CO2ì¦ê°€ì—ë”°ë¥¸í‘œë©´ì˜¨ë„ì¦ê°€.png", caption="[CO2 ì¦ê°€ì— ë”°ë¥¸ í‘œë©´ ì˜¨ë„ ì¦ê°€]")